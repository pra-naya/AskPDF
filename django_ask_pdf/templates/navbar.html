{% load static %}
<nav class="sticky h-14 inset-x-0 top-0 z-30 w-full border-b border-gray-200 bg-white/75 backdrop-blur-lg transition-all">
    <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
        <div class="flex h-14 items-center justify-between border-b border-zinc-200">
            <a href="{% url 'home' %}" class="flex z-40 font-semibold">
                <span>AskPDF</span>
            </a>

            <!-- Mobile Nav (Implement separately if needed) -->
            <div class="sm:hidden"></div>

            <div class="hidden items-center space-x-4 sm:flex">
                {% if not user.is_authenticated %}
                    <a href="{% url 'login' %}" class="text-sm font-medium text-gray-500 hover:text-gray-900">
                        Sign in
                    </a>
                    <a href="{% url 'register' %}" class="inline-flex items-center rounded-md bg-blue-600 px-3 py-2 text-sm font-semibold text-white shadow-sm hover:bg-blue-500 focus-visible:outline focus-visible:outline-2 focus-visible:outline-offset-2 focus-visible:outline-blue-600">
                        Get started
                        <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="ml-1.5 h-5 w-5">
                            <path d="M5 12h14"></path><path d="m12 5 7 7-7 7"></path>
                        </svg>
                    </a>
                {% else %}
                <a href="{% url 'dashboard' %}" class="text-sm font-medium text-gray-500 hover:text-gray-900">
                    Dashboard
                </a>
                    <!-- User Dropdown Menu -->
                    <div class="relative">
                        <button id="userDropdown" class="flex items-center text-sm font-medium text-gray-500 hover:text-gray-900">
                            <!-- {% if user.first_name and user.last_name %}
                                {{ user.first_name }} {{ user.last_name }}
                            {% else %}
                                Your Account
                            {% endif %} -->
                            <!-- Optional dropdown arrow icon -->
                             <img src="{% static 'images/profile1.png' %}" class="h-8 w-8">
                        </button>
                        <style>
                            /* Remove focus outline from the button */
                            #userDropdown:focus {
                                outline: none;
                                box-shadow: none;
                            }
                        </style>

                        <!-- Dropdown content -->
                        <div id="dropdownMenu" class="hidden absolute right-0 mt-2 w-48 bg-white rounded-md shadow-lg">
                            <div class="flex items-center p-2">
                                <div class="flex flex-col">
                                    <span class="font-medium text-sm">{{ user.username }}</span>
                                    <span class="text-xs text-gray-600">{{ user.email }}</span>
                                </div>
                            </div>
                            <div class="border-t border-gray-200"></div>
                            <a href="{% url 'dashboard' %}" class="block px-4 py-2 text-sm text-gray-700 hover:bg-gray-100">Dashboard</a>
                            
                            <div class="border-t border-gray-200"></div>
                            <a href="{% url 'logout' %}" class="block px-4 py-2 text-sm text-gray-700 hover:bg-gray-100">Log out</a>
                        </div>
                    </div>
                    <script>
                        // Toggle dropdown menu visibility
                        document.getElementById('userDropdown').addEventListener('click', function() {
                            const dropdown = document.getElementById('dropdownMenu');
                            dropdown.classList.toggle('hidden');
                        });
                    </script>
                {% endif %}
            </div>
        </div>
    </div>
</nav>
